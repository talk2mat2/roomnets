{"version":3,"sources":["components/pages/blogs.js"],"names":["Blogs","React","useState","homepageData","setHomePageData","loading","setLoading","country","useSelector","CountryReducer","Banners","googleAdsScript","adsenseData","setadsensePageData","total","limit","pagination","setPagination","pageNo","setpageNo","fetchHomepageAdsense","a","axios","get","then","response","catch","err","useEffect","res","data","userData","console","log","fetchHomepageModels","length","regionBanners","Parser","className","style","height","alignItems","display","flexDirection","src","alt","map","xxx","index","whiteSpace","overflow","imagUri","postedBy","to","pathname","_id","state","comments","format","created_at","likes","title","String","body","slice","onClick","setTimeout","showBanner"],"mappings":"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","file":"static/js/48.fbc6883e.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Header from \"../Header\";\r\nimport Footer from \"../footer\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Moment from \"react-moment\";\r\nimport Parser from \"html-react-parser\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nconst Blogs = () => {\r\n  const [homepageData, setHomePageData] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const country = useSelector(({ CountryReducer }) => CountryReducer.country);\r\n  const [adsenseData, setadsensePageData] = React.useState({\r\n    Banners: [],\r\n    googleAdsScript: \"\",\r\n  });\r\n  const [pagination, setPagination] = React.useState({ total: 0, limit: \"\" });\r\n  const [pageNo, setpageNo] = React.useState(0);\r\n\r\n  const fetchHomepageAdsense = async () => {\r\n    return await axios\r\n      .get(`/api/v1/fetchHomepageModels`)\r\n      .then((response) => response)\r\n      .catch((err) => err);\r\n  };\r\n\r\n  React.useEffect(\r\n    () =>\r\n      fetchHomepageAdsense()\r\n        .then((res) => {\r\n          setadsensePageData({ ...res.data.userData });\r\n        })\r\n        .catch((err) => console.log(err)),\r\n\r\n    []\r\n  );\r\n\r\n  const fetchHomepageModels = async () => {\r\n    setLoading(true);\r\n    return await axios\r\n      .get(`/api/v1/BlogPostAll/${country}`)\r\n      .then((response) => {\r\n        setLoading(false);\r\n        response.data.userData &&\r\n          response.data.userData.length > 0 &&\r\n          setPagination({\r\n            ...pagination,\r\n            limit: response.data.limit,\r\n            total: response.data.total,\r\n          });\r\n        response.data.userData.length > 0 && setpageNo(pageNo + 1);\r\n        return response;\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        return err;\r\n      });\r\n  };\r\n\r\n  React.useEffect(\r\n    () =>\r\n      fetchHomepageModels()\r\n        .then((res) => {\r\n          console.log(res);\r\n          res.data.userData && setHomePageData(res.data.userData);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        }),\r\n\r\n    []\r\n  );\r\n  const regionBanners =\r\n    country === \"KE\"\r\n      ? \"Banners_KE\"\r\n      : country === \"US\"\r\n      ? \"Banners_US\"\r\n      : country === \"NG\"\r\n      ? \"Banners_NG\"\r\n      : country === \"IE\"\r\n      ? \"Banners_IE\"\r\n      : country === \"ZA\"\r\n      ? \"Banners_ZA\"\r\n      : country === \"GB\"\r\n      ? \"Banners_GB\"\r\n      : country === \"GH\"\r\n      ? \"Banners_GH\"\r\n      : \"\";\r\n  const mapBlosPost = () => {\r\n    //console.log(homepageData)\\\r\n\r\n    return (\r\n      homepageData &&\r\n      homepageData.length > 0 &&\r\n      homepageData.map((xxx, index) => {\r\n        return (\r\n          <div\r\n            style={{ whiteSpace: \"wrap\", overflow: \"hidden\" }}\r\n            className=\"col-md-12 col-lg-4 wow slideInUp animated\"\r\n          >\r\n            <div className=\"post-thumbnail hover-secondery-primary\">\r\n              <div className=\"post-img overflow-hidden\">\r\n                <img\r\n                  src={xxx.imagUri || \"/images/blog/default.jpg\"}\r\n                  alt=\"Image\"\r\n                />\r\n              </div>\r\n              <div className=\"post-meta icon-primary color-secondary-a px-20 py-10 bg-gray\">\r\n                <ul className=\"post-info list-style-1 d-flex color-secondary\">\r\n                  <li>\r\n                    <i className=\"fa fa-user\" /> {xxx.postedBy}\r\n                  </li>\r\n                  <li>\r\n                    <Link\r\n                      className=\"post-title mb-15 \"\r\n                      to={{\r\n                        pathname: `/blogDetails/${xxx._id}`,\r\n                        state: xxx._id,\r\n                      }}\r\n                    >\r\n                      <i className=\"fa fa-comments-o\" />\r\n                      {xxx.comments.length}\r\n                    </Link>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"post-content mt-20 color-secondary color-secondary-a\">\r\n                <div className=\"post-date w-25 float-left bg-gray mr-20 text-center\">\r\n                  <div className=\"py-10\">\r\n                    <span className=\"d-block\">\r\n                      {\" \"}\r\n                      <Moment format=\"DD\">{xxx.created_at}</Moment>\r\n                    </span>{\" \"}\r\n                    <Moment format=\"MMMM\">{xxx.created_at}</Moment>\r\n                  </div>\r\n                  <div className=\"post-love py-5 bg-primary\">\r\n                    <Link\r\n                      className=\"post-title mb-15 \"\r\n                      to={{\r\n                        pathname: `/blogDetails/${xxx._id}`,\r\n                        state: xxx._id,\r\n                      }}\r\n                    >\r\n                      <i className=\"fa fa-heart\" aria-hidden=\"true\" />{\" \"}\r\n                      {xxx.likes.length}\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-area d-table\">\r\n                  <Link\r\n                    className=\"post-title mb-15 \"\r\n                    to={{ pathname: `/blogDetails/${xxx._id}`, state: xxx._id }}\r\n                  >\r\n                    <h5>{xxx.title}</h5>\r\n                  </Link>\r\n                  <p>{String(xxx.body).slice(0, 100)}</p>\r\n                  <Link\r\n                    className=\"btn-more mt-15\"\r\n                    to={{ pathname: `/blogDetails/${xxx._id}`, state: xxx._id }}\r\n                  >\r\n                    Read More\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    setLoading(true);\r\n    setHomePageData([]);\r\n    setTimeout(async () => {\r\n      fetchHomepageModels()\r\n        .then((res) => {\r\n          console.log(res);\r\n          res.data.userData && setHomePageData(res.data.userData);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }, 1000);\r\n  };\r\n  return (\r\n    <>\r\n      <Helmet>{Parser(adsenseData.googleAdsScript)}</Helmet>\r\n      <Header />\r\n      <div className=\"topPatch\" style={{ height: \"120px\" }} />\r\n      <div className=\"row justify-content-center mt-40 \">\r\n        <div\r\n          style={{\r\n            alignItems: \"center\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n          }}\r\n          className=\" text-center \"\r\n        >\r\n          <div className=\"col-lg-7 col-8\">\r\n            <img className=\"nav-logo\" src=\"/images/logo/logo2.png\" alt=\"logo\" />\r\n          </div>\r\n\r\n          <br />\r\n          <h5>Let's Find you a roommate or room to rent</h5>\r\n        </div>\r\n      </div>\r\n      <section className=\"my-40 border-top-1-gray\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {homepageData.length > 0 ? (\r\n              mapBlosPost()\r\n            ) : loading ? (\r\n              <h3 className=\"text-center\">Loading...</h3>\r\n            ) : (\r\n              <h5>:-) Empty, No post yet !</h5>\r\n            )}\r\n\r\n            <div className=\"col-lg-12 wow slideInDown animated\">\r\n              <div className=\"mx-auto d-table\">\r\n                <ul className=\"pagination mt-50\">\r\n                  <li className=\"page-item\">\r\n                    {pagination.limit * pageNo < pagination.total ? (\r\n                      <div>\r\n                        <button\r\n                          onClick={handleNextPage}\r\n                          className=\"btn page-link\"\r\n                        >\r\n                          Next Page\r\n                        </button>\r\n                      </div>\r\n                    ) : null}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-12 addbanner1 my-20\">\r\n            {adsenseData &&\r\n            adsenseData[regionBanners] &&\r\n            homepageData.showBanner== true &&\r\n            adsenseData[regionBanners].length > 0 ? (\r\n              <img src={adsenseData[regionBanners][0][\"uri\"]} alt=\"add\" />\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Blogs;\r\n"],"sourceRoot":""}