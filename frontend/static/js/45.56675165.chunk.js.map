{"version":3,"sources":["components/pages/apartments/PostApart5.jsx"],"names":["PostApart5","history","useHistory","React","useState","Loading","setLoading","errors","setErrors","ImageState","setImageState","PostFlatReducer","useSelector","currentUser","user","token","add_type","country","CountryReducer","advert_title","advert_description","formResponse","setFormResponse","validatePage","a","newError","Array","push","length","handleNext","then","res","window","scrollTo","Allresponse","formData","FormData","append","JSON","stringify","x","axios","url","method","data","headers","Authorization","response","console","log","status","replace","usadData","_id","catch","err","alert","className","style","height","map","xxx","fontSize","marginRight","onSubmit","e","preventDefault","type","name","value","onChange","target","rows","xx","margin","src","file","alt","maxHeight","display","variant","component","hidden","event","files","URL","createObjectURL","Uri","accept","onClick","goBack","disabled","size","color"],"mappings":"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","file":"static/js/45.56675165.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Header from \"../../Header\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport axios from \"axios\";\r\nimport ErrorOutlineIcon from \"@material-ui/icons/ErrorOutline\";\r\nimport Footer from \"../../footer\";\r\nconst PostApart5 = () => {\r\n  const history = useHistory();\r\n  const handleBack = () => history.goBack();\r\n  const [Loading, setLoading] = React.useState(false);\r\n  const [errors, setErrors] = React.useState([]);\r\n  const [ImageState, setImageState] = React.useState([]);\r\n  const PostFlatReducer = useSelector(({ PostFlatReducer }) => PostFlatReducer);\r\n  const currentUser = useSelector(({ user }) => user.currentUser);\r\n  const token = currentUser && currentUser.token;\r\n    const add_type = PostFlatReducer.add_type ||\"\"\r\n    const country = useSelector(({ CountryReducer }) => CountryReducer.country);\r\n  // const handleNext = () => {\r\n  //   // history.push(\"/process-rooms-success\")\r\n  //   const Allresponse = { ... PostFlatReducer, ...formResponse };\r\n  //   console.log(Allresponse);\r\n  // };\r\n  const [formResponse, setFormResponse] = React.useState({\r\n    advert_title: \"\",\r\n    advert_description: \"\",\r\n    country:country\r\n  });\r\n  function handleChange(event) {\r\n    if (\r\n      event.target.files[0].type === \"image/png\" ||\r\n      event.target.files[0].type === \"image/jpg\" ||\r\n      event.target.files[0].type === \"image/jpeg\"\r\n    ) {\r\n      if (event.target.files[0]) {\r\n        const newImagestate = ImageState;\r\n        // newImagestate.push({\r\n        //   file: URL.createObjectURL(event.target.files[0]),\r\n        //   Uri: event.target.files[0],\r\n        // });\r\n        // setImageState(newImagestate);\r\n        setImageState([\r\n          ...ImageState,\r\n          {\r\n            file: URL.createObjectURL(event.target.files[0]),\r\n            Uri: event.target.files[0],\r\n          },\r\n        ]);\r\n      }\r\n    } else {\r\n      return alert(\"select a valid image format\");\r\n    }\r\n  }\r\n\r\n  const validatePage = async () => {\r\n    const { advert_description, advert_title } = formResponse;\r\n\r\n    const newError = new Array();\r\n    if (!advert_title) {\r\n      newError.push(\"Advert title can not be blank\");\r\n    }\r\n\r\n    if (!advert_description) {\r\n      newError.push(\"Advert body can not be blank\");\r\n    }\r\n    if (ImageState.length < 1) {\r\n      newError.push(\"You must select at least one image or more\");\r\n    }\r\n\r\n    return newError;\r\n  };\r\n  const handleNext = async () => {\r\n    await validatePage().then(async (res) => {\r\n      if (res.length > 0) {\r\n        setErrors(res);\r\n        window.scrollTo(0, 150);\r\n      } else {\r\n        const Allresponse = { ...PostFlatReducer, ...formResponse };\r\n        var formData = new FormData();\r\n        formData.append(\"userData\", JSON.stringify(Allresponse));\r\n        for (let x = 0; x < ImageState.length; x++) {\r\n          formData.append(\"file\", ImageState[x][\"Uri\"]);\r\n        }\r\n        // dispatch(SETPOSTROOMPROCESS(formResponse));\r\n        setLoading(true);\r\n        await axios({\r\n          // url: `${ProxyUrl}/users/PreRegister`,\r\n          url: `/Api/v1/PostAddApart`,\r\n          method: \"POST\",\r\n          data: formData,\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n            Authorization: token,\r\n          },\r\n        })\r\n          .then(function (response) {\r\n            setLoading(false);\r\n            console.log(response.data);\r\n            if (response.data.status) {\r\n\r\n                if(add_type===\"PREMIUM\")\r\n              {\r\n                history.replace(`/Upgrade-apart/${response.data.usadData._id}`);\r\n              }\r\n             else{\r\n                history.replace(\"/process-apart-success\");\r\n             }\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            setLoading(false);\r\n            alert(\"An error has occured\");\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  const mapImagestate = () => {\r\n    return ImageState.map((xx) => (\r\n      <div className=\"col-3\" style={{ margin: \"10px\" }}>\r\n        <img\r\n          src={xx.file}\r\n          alt=\"preview\"\r\n          style={{\r\n            maxHeight: \"80px\",\r\n            display: \"block\",\r\n            margin: \"10px\",\r\n            // maxWidth: \"80px\",\r\n          }}\r\n        />\r\n      </div>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <div>\r\n        <div className=\"topPatch\" style={{ height: \"80px\" }} />\r\n        <div className=\"poststep pricing my-80\">\r\n          <div className=\"container\">\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-lg-12 wow animated slideInUp\">\r\n                <div className=\"main-title w-75 mx-auto d-table text-center mb-30\">\r\n                  {/* <span className=\"small-title color-primary position-relative line-2-primary\">\r\n                    What We Do?\r\n                  </span> */}\r\n                  <h2 className=\"title mb-20 color-primary\">\r\n                    Advertise your House/Apartment for rent\r\n                  </h2>\r\n                  <div className=\"row justify-content-center\">\r\n                    <div className=\"col-lg-7 text-left\">\r\n                      {errors.length > 0\r\n                        ? errors.map((xxx) => (\r\n                            <p className=\"error-card alert-danger\">\r\n                              <ErrorOutlineIcon\r\n                                fontSize=\"small\"\r\n                                style={{ marginRight: \"4px\" }}\r\n                              />\r\n                              {xxx}\r\n                            </p>\r\n                            // <Alert severity=\"error\">{xxx}</Alert>\r\n                          ))\r\n                        : null}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-lg-8 myform\">\r\n                <div className=\"submit-property bg-light\">\r\n                  <form\r\n                    className=\"property-submit-form\"\r\n                    onSubmit={(e) => e.preventDefault()}\r\n                  >\r\n                    <div className=\"property-info mt-30 bg-white py-40 px-30\">\r\n                      <div className=\"row\">\r\n                        <div className=\"form-group col-lg-8\">\r\n                          <label>Advert title</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"property-id\"\r\n                            value={formResponse.advert_title}\r\n                            onChange={(e) =>\r\n                              setFormResponse({\r\n                                ...formResponse,\r\n                                advert_title: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group col-lg-12\">\r\n                          <label>Advert Description</label>\r\n                          <textarea\r\n                            onChange={(e) =>\r\n                              setFormResponse({\r\n                                ...formResponse,\r\n                                advert_description: e.target.value,\r\n                              })\r\n                            }\r\n                            value={formResponse.advert_description}\r\n                            className=\"form-control bg-gray\"\r\n                            rows=\"7\"\r\n                          ></textarea>\r\n                        </div>\r\n                        <div className=\"row my-20\">{mapImagestate()}</div>\r\n\r\n                        <br />\r\n                        <div className=\"form-group col-lg-10\">\r\n                          {ImageState.length < 5 ? (\r\n                            <>\r\n                              {\" \"}\r\n                              <label>Select -Images</label>\r\n                              <Button\r\n                                className=\"btn btn-primary\"\r\n                                variant=\"contained\"\r\n                                component=\"label\"\r\n                              >\r\n                                <small style={{ fontSize: \"8px\" }}>\r\n                                  Select images\r\n                                </small>\r\n                                <input\r\n                                  type=\"file\"\r\n                                  hidden\r\n                                  onChange={handleChange}\r\n                                  accept=\"image/x-png,image/jpeg\"\r\n                                />\r\n                              </Button>\r\n                            </>\r\n                          ) : null}\r\n                        </div>\r\n\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>Bedrooms</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"bedrooms\"\r\n                          />\r\n                        </div> */}\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>Bathrooms</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"bathrooms\"\r\n                          />\r\n                        </div> */}\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>Garages</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"garages\"\r\n                          />\r\n                        </div> */}\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>Garages Size</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"garages-size\"\r\n                          />\r\n                        </div> */}\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>Built Year</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"built-year\"\r\n                          />\r\n                        </div> */}\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>video URL</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"video-link\"\r\n                          />\r\n                        </div> */}\r\n                        {/* <div className=\"form-group col-lg-4\">\r\n                          <label>360° Virtual Tour</label>\r\n                          <input\r\n                            className=\"form-control bg-gray\"\r\n                            type=\"text\"\r\n                            name=\"virtual-tour\"\r\n                          />\r\n                        </div> */}\r\n\r\n                        <div className=\"col-lg-12\">\r\n                          <button\r\n                            onClick={handleBack}\r\n                            className=\"btn btn-primary\"\r\n                          >\r\n                            Back\r\n                          </button>\r\n                          <button\r\n                            onClick={handleNext}\r\n                            disabled={Loading}\r\n                            className=\"btn btn-primary float-right\"\r\n                          >\r\n                            {Loading ? (\r\n                              <CircularProgress size={13} color=\"#fff\" />\r\n                            ) : (\r\n                              \"Post Add\"\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostApart5;\r\n"],"sourceRoot":""}