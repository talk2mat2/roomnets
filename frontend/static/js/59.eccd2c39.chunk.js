(this.webpackJsonpgameflow=this.webpackJsonpgameflow||[]).push([[59],{283:function(e,t,r){"use strict";r.r(t);var a=r(8),c=r(25),n=r.n(c),s=r(32),i=r(184),l=r(31),o=r(1),d=r.n(o),j=r(54),u=r(272),b=r(4),m=r(14),p=r(40),f=r.n(p),h=r(192),g=r(174),x=r.n(g),O=r(55),v=r(0);t.default=function(){var e=Object(b.f)(),t=d.a.useState([]),r=Object(l.a)(t,2),c=r[0],o=r[1],p=d.a.useState(!1),g=Object(l.a)(p,2),y=g[0],N=g[1],w=d.a.useState([]),k=Object(l.a)(w,2),A=k[0],S=k[1],_=Object(m.c)((function(e){return e.PostRommsAddReducer})),R=Object(m.c)((function(e){return e.user.currentUser})),U=R&&R.token,C=_.add_type||"",P=Object(m.c)((function(e){return e.CountryReducer.country})),D=d.a.useState({advert_title:"",advert_description:"",country:P}),z=Object(l.a)(D,2),I=z[0],J=z[1];var T=function(){var e=Object(s.a)(n.a.mark((function e(){var t,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.advert_description,r=I.advert_title,a=new Array,r||a.push("Advert title can not be blank"),t||a.push("Advert body can not be blank"),A.length<1&&a.push("You must select at least one image or more"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var t=Object(s.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T().then(function(){var t=Object(s.a)(n.a.mark((function t(r){var c,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>0)){t.next=5;break}o(r),window.scrollTo(0,150),t.next=12;break;case 5:for(c=Object(a.a)(Object(a.a)({},_),I),(s=new FormData).append("userData",JSON.stringify(c)),i=0;i<A.length;i++)s.append("file",A[i].Uri);return N(!0),t.next=12,f()({url:"/Api/v1/PostAddRoms",method:"POST",data:s,headers:{"Content-Type":"multipart/form-data",Authorization:U}}).then((function(t){N(!1),t.data.status&&("PREMIUM"===C?e.replace("/Upgrade-room/".concat(t.data.usadData._id)):e.replace("/process-rooms-success"))})).catch((function(e){console.log(e),N(!1),alert("An error occured")}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)(j.a,{}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"topPatch",style:{height:"80px"}}),Object(v.jsx)("div",{className:"poststep pricing my-80",children:Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)("div",{className:"row justify-content-center",children:[Object(v.jsx)("div",{className:"col-lg-12 wow animated slideInUp",children:Object(v.jsxs)("div",{className:"main-title w-75 mx-auto d-table text-center mb-30",children:[Object(v.jsx)("h2",{className:"title mb-20 color-primary",children:"Advertise your room"}),Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsx)("div",{className:"col-lg-7 text-left",children:c.length>0?c.map((function(e){return Object(v.jsxs)("p",{className:"error-card alert-danger",children:[Object(v.jsx)(x.a,{fontSize:"small",style:{marginRight:"4px"}}),e]})})):null})})]})}),Object(v.jsx)("div",{className:"col-lg-8 myform",children:Object(v.jsx)("div",{className:"submit-property bg-light",children:Object(v.jsx)("form",{className:"property-submit-form",onSubmit:function(e){return e.preventDefault()},children:Object(v.jsxs)("div",{className:"property-info mt-30 bg-white py-40 px-30",children:[Object(v.jsx)("div",{className:"text-right",children:Object(v.jsx)("p",{children:"4 of 4"})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"form-group col-lg-8",children:[Object(v.jsx)("label",{children:"Advert title"}),Object(v.jsx)("input",{className:"form-control bg-gray",type:"text",name:"property-id",value:I.advert_title,onChange:function(e){return J(Object(a.a)(Object(a.a)({},I),{},{advert_title:e.target.value}))}})]}),Object(v.jsxs)("div",{className:"form-group col-lg-12",children:[Object(v.jsx)("label",{children:"Advert Description"}),Object(v.jsx)("textarea",{onChange:function(e){return J(Object(a.a)(Object(a.a)({},I),{},{advert_description:e.target.value}))},value:I.advert_description,className:"form-control bg-gray",rows:"7"})]}),Object(v.jsx)("div",{className:"row my-20",children:A.map((function(e){return Object(v.jsx)("div",{className:"col-3",style:{margin:"10px"},children:Object(v.jsx)("img",{src:e.file,alt:"preview",style:{maxHeight:"80px",display:"block",margin:"10px"}})})}))}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"form-group col-lg-10",children:A.length<5?Object(v.jsxs)(v.Fragment,{children:[" ",Object(v.jsx)("label",{children:"Select -Images"}),Object(v.jsxs)(u.a,{className:"btn btn-primary",variant:"contained",component:"label",children:[Object(v.jsx)("small",{style:{fontSize:"8px"},children:"Select images"}),Object(v.jsx)("input",{type:"file",hidden:!0,onChange:function(e){if("image/png"!==e.target.files[0].type&&"image/jpg"!==e.target.files[0].type&&"image/jpeg"!==e.target.files[0].type)return alert("select a valid image format");e.target.files[0]&&S([].concat(Object(i.a)(A),[{file:URL.createObjectURL(e.target.files[0]),Uri:e.target.files[0]}]))},accept:"image/x-png,image/jpeg"})]})]}):null}),Object(v.jsxs)("div",{className:"col-lg-12",children:[Object(v.jsx)("button",{onClick:function(){return e.goBack()},className:"btn btn-primary",children:"Back"}),Object(v.jsx)("button",{onClick:B,disabled:y,className:"btn btn-primary float-right",children:y?Object(v.jsx)(h.a,{size:13,color:"#fff"}):"Post Add"})]})]})]})})})})]})})})]}),Object(v.jsx)(O.a,{})]})}}}]);
//# sourceMappingURL=59.eccd2c39.chunk.js.map